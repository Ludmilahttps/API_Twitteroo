# Requisitos

- Geral
    - [x]  A porta utilizada pelo seu servidor deve ser a 5000 (isso facilita nossa avaliaÃ§Ã£o ðŸ™‚)
    - [x]  Versionamento usando Git Ã© obrigatÃ³rio, crie um **repositÃ³rio pÃºblico** no seu perfil do GitHub
    - [x]  FaÃ§a commits a cada funcionalidade implementada
    - [x]  Adicione o cÃ³digo que inicia o servidor em `src/app.js`
    - [x]  Adicione um script no package.json para iniciar o servidor rodando `npm run start` como no exemplo abaixo
       
- Armazenamento de dados
    - [x]  Para persistir os dados (usuÃ¡rios e tweets), utilize variÃ¡veis globais em memÃ³ria
    - [x]  O formato de um **usuÃ¡rio** deve ser:
        
        ```jsx
        {
        	username: 'bobesponja', 
        	avatar: "https://super.abril.com.br/wp-content/uploads/2020/09/04-09_gato_SITE.jpg?quality=70&strip=info" 
        }
        ```
        
    - [x]  O formato de um **tweet** deve ser:
        
        ```jsx
        {
        	username: "bobesponja",
          tweet: "eu amo o hub"
        }
        ```
        
- **POST** `/sign-up`
    - [x]  Deve receber (pelo body da request), um parÃ¢metro **username** e um **avatar**, contendo o nome do username do usuÃ¡rio e a sua foto de avatar:
        
        ```jsx
        {
            username: "bobesponja",
        		avatar: "https://super.abril.com.br/wp-content/uploads/2020/09/04-09_gato_SITE.jpg?quality=70&strip=info"
        }
        ```
        
    - [x]  Salvar esse usuÃ¡rio num array de usuÃ¡rios do servidor
    - [x]  Por fim, retornar a mensagem `â€œOKâ€`
- **POST** `/tweets`
    - [ ]  Se o usuÃ¡rio nÃ£o estiver cadastrado (username nÃ£o fez sign-up anteriormente), deve retornar a mensagem `â€œUNAUTHORIZEDâ€`
    - [x]  Deve receber (pelo body da request), os parÃ¢metros `username` e `tweet`:
        
        ```jsx
        {
        	username: "bobesponja",
          tweet: "eu amo o hub"
        }
        ```
        
    - [x]  Salvar esse tweet num array de tweets do servidor
    - [x]  Por fim, retornar a mensagem `â€œOKâ€`
- **GET** `/tweets`
    - [x]  Retornar os 10 Ãºltimos tweets publicados
        
        ```jsx
        [
        	{
        		username: "bobesponja",
        		avatar: "https://super.abril.com.br/wp-content/uploads/2020/09/04-09_gato_SITE.jpg?quality=70&strip=info",
        		tweet: "eu amo o hub"
        	}
        ]
        ```
        
    - Repare que a informaÃ§Ã£o â€œavatarâ€ **nÃ£o vem** da requisiÃ§Ã£o **post** de `/tweets`. Para retornar o â€œavatarâ€ na requisiÃ§Ã£o **get** de `/tweets`, vocÃª vai precisar obtÃª-lo de outra forma.


- ValidaÃ§Ã£o de dados
    - [ ]  Todas as rotas deverÃ£o validar os dados recebidos, caso algum dado venha vazio ou no formato invÃ¡lido, o servidor deverÃ¡ retornar o status code 400 (BAD REQUEST) e nÃ£o continuarÃ¡ com a execuÃ§Ã£o da funÃ§Ã£o. **Dica:** procure pelo mÃ©todo `res.sendStatus()`
    - [ ]  **POST** `/sign-up` precisa validar se os valores de `username` e `avatar` foram enviados e caso contrÃ¡rio, deverÃ¡ responder com a mensagem â€œTodos os campos sÃ£o obrigatÃ³rios!â€
    - [ ]  **POST** `/tweets` precisa validar se os valores de `username` e `tweet` foram enviados e caso contrÃ¡rio, deverÃ¡ responder com a mensagem â€œTodos os campos sÃ£o obrigatÃ³rios!â€
- Status codes de requisiÃ§Ãµes POST
    - [ ]  Todas as requisiÃ§Ãµes POST deverÃ£o retornar o status code 201 (CREATED) alÃ©m do seu retorno jÃ¡ descrito (mensagens, JSONs, etc). **Dica:** procure pelo mÃ©todo `res.status()` e tente utilizÃ¡-lo junto do mÃ©todo `res.send()`
    - [ ]  Para o caso em que usuÃ¡rio nÃ£o fez sign-up na rota de POST `/tweets`, deve retornar 401
- **GET** `/tweets/USERNAME`
    - [ ]  Retornar todos os tweets publicados do usuario recebido por parÃ¢metro de rota
        
        ```jsx
        [
        	{
        		username: "bobesponja",
        		avatar: "https://super.abril.com.br/wp-content/uploads/2020/09/04-09_gato_SITE.jpg?quality=70&strip=info",
        	  tweet: "eu amo o hub"
        	}
        ]
        ```
        
- **GET** `/tweets` com paginaÃ§Ã£o
    - [ ]  Esse endpoint deverÃ¡ passar a receber a pÃ¡gina identificada via query string (`?page=1`). Esse Ã© um recurso diferente do que vimos atÃ© agora (route params e body)
    - [ ]  Modifique o endpoint para retornar corretamente os tweets da â€œpÃ¡ginaâ€ (`page`) atual, esse endpoint serÃ¡ chamado ao clicar no botÃ£o â€œ**Carregar mais**â€ (isso jÃ¡ foi feito no front-end). A primeira pÃ¡gina corresponde aos Ãºltimos 10 tweets, a segunda do 11 ao 20, a terceira do 21 ao 30, etc
    - [ ]  Lembre-se de validar se o valor de `page` (query string) foi enviado e tem valor **maior ou igual a** 1 e caso contrÃ¡rio, deverÃ¡ responder com a mensagem â€œInforme uma pÃ¡gina vÃ¡lida!â€ e com o status code 400 (BAD REQUEST)
    - [ ]  O parÃ¢metro `page` continua opcional. Caso nÃ£o seja enviado, deverÃ¡ comportar como no requisito original (200, retornando Ãºltimos 10 tweets)
- **POST** `/tweets` recebendo username por Header
    - [x]  Esse endpoint deverÃ¡ parar de receber o valor de username do body e passar a recebÃª-lo por meio de um **header** `user`. Esse Ã© um recurso diferente do que vimos atÃ© agora (route params e body)


200: Ok => Significa que deu tudo certo com a requisiÃ§Ã£o
201: Created => Sucesso na criaÃ§Ã£o do recurso
301: Moved Permanently => Significa que o recurso que vocÃª estÃ¡ tentando acessar foi movido pra outra URL
401: Unauthorized => Significa que vocÃª nÃ£o tem acesso a esse recurso
404: Not Found => Significa que o recurso pedido nÃ£o existe
409: Conflict => Significa que o recurso que vocÃª estÃ¡ tentando inserir jÃ¡ foi inserido
422: Unprocessable Entity => Significa que a requisiÃ§Ã£o enviada nÃ£o estÃ¡ no formato esperado
500: Internal Server Error => Significa que ocorreu algum erro desconhecido no servidor